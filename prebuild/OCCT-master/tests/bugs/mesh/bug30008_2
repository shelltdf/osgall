puts "======="
puts "0030008: BRepMesh does not respect angular deflection in internal area of bspline surface"
puts "======="
puts ""

pcylinder cy 100 500
bsplinecurve cc 5 4 -494.543457494654 6 500 4 507.372773368102 4 1501.91623086297 6 -500 -798.578274581199 755.284518447357 1 -500 -646.205376770376 627.428476092882 1 -500 -493.832478959552 499.572433738407 1 -500 -341.459581148729 371.716391383932 1 -500 -189.086683337906 243.860349029457 1 -500 -35.5842111132817 115.056481200973 1 -500 -33.7993197286247 114.2995541724 0.957903314642061 -500 -31.778022626919 114.565662984205 0.95790331464206 -500 -30.2498570721059 115.75876223351 1 -500 84.6852511720001 279.903107977019 1 -500 198.774589601206 442.839569245217 1 -500 312.863928030413 605.776030513415 1 -500 426.953266459619 768.712491781612 1 -500 541.042604888826 931.64895304981 1
extsurf ss cc 1 0 0 

mkface ff ss -494.543457494654 1501.91623086297 0 1000
halfspace hs ff 0 0 500

bcut rc cy hs 
explode rc f
copy rc_1 result
tscale result 0 0 0 0.01
nurbsconvert result result

incmesh result 0.15 -a 20

tricheck result
checktrinfo result -tri 193 -nod 147 -defl 0.052300780129031083 -tol_abs_defl 1.0e-6

vinit

vdefaults -autoTriang 0
vdisplay result
vfit
vsetdispmode 1
vviewparams -scale 335.304 -eye 1.95918 0.124681 5.05411 -at 0.0736354 0.0378839 1.46922 -up -0.748808 0.542534 0.380715 -proj 0.4654 0.0214236 0.884841

checkview -screenshot -3d -path ${imagedir}/${test_image}.png
