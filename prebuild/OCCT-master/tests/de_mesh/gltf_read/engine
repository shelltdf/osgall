puts "========"
puts "0030691: test glTF reader on standard sample models"
puts "========"

ReadGltf D [locate_data_file bug30691_2CylinderEngine.glb]
XGetOneShape s D
checknbshapes s -face 34 -compound 18
checktrinfo s -tri 121496 -nod 84657

set THE_REF_DUMP {
ASSEMBLY COMPOUND 0:1:1:1 "bug30691_2CylinderEngine.glb"
	INSTANCE FACE 0:1:1:1:1 (refers to 0:1:1:2) "body"
	INSTANCE FACE 0:1:1:1:2 (refers to 0:1:1:2) "body"
	INSTANCE COMPOUND 0:1:1:1:3 (refers to 0:1:1:3) "Lifter_123-923_0_Parts_1"
	INSTANCE COMPOUND 0:1:1:1:4 (refers to 0:1:1:3) "Lifter_123-923_0_Parts_1"
	INSTANCE COMPOUND 0:1:1:1:5 (refers to 0:1:1:3) "Lifter_123-923_0_Parts_1"
	INSTANCE COMPOUND 0:1:1:1:6 (refers to 0:1:1:3) "Lifter_123-923_0_Parts_1"
	INSTANCE COMPOUND 0:1:1:1:7 (refers to 0:1:1:4) "rod_123-699_0_Parts_1"
	INSTANCE COMPOUND 0:1:1:1:8 (refers to 0:1:1:4) "rod_123-699_0_Parts_1"
	INSTANCE COMPOUND 0:1:1:1:9 (refers to 0:1:1:5) "Compound"
	INSTANCE COMPOUND 0:1:1:1:10 (refers to 0:1:1:31) "Compound"
	INSTANCE COMPOUND 0:1:1:1:11 (refers to 0:1:1:32) "Compound"
	INSTANCE COMPOUND 0:1:1:1:12 (refers to 0:1:1:33) "Compound"
	INSTANCE COMPOUND 0:1:1:1:13 (refers to 0:1:1:36) "Compound"
PART FACE 0:1:1:2 "body"
PART COMPOUND 0:1:1:3 "Lifter_123-923_0_Parts_1"
	FACE 0:1:1:3:1
	FACE 0:1:1:3:2
PART COMPOUND 0:1:1:4 "rod_123-699_0_Parts_1"
	FACE 0:1:1:4:1
	FACE 0:1:1:4:2
ASSEMBLY COMPOUND 0:1:1:5 "Compound"
	INSTANCE FACE 0:1:1:5:1 (refers to 0:1:1:6) "Face"
	INSTANCE FACE 0:1:1:5:2 (refers to 0:1:1:7) "body_2"
	INSTANCE FACE 0:1:1:5:3 (refers to 0:1:1:8) "body_3"
	INSTANCE FACE 0:1:1:5:4 (refers to 0:1:1:2) "body"
	INSTANCE FACE 0:1:1:5:5 (refers to 0:1:1:2) "body"
	INSTANCE FACE 0:1:1:5:6 (refers to 0:1:1:9) "body_4"
	INSTANCE FACE 0:1:1:5:7 (refers to 0:1:1:10) "body_5"
	INSTANCE FACE 0:1:1:5:8 (refers to 0:1:1:11) "body_6"
	INSTANCE COMPOUND 0:1:1:5:9 (refers to 0:1:1:12) "Compound"
PART FACE 0:1:1:6 "Face"
PART FACE 0:1:1:7 "body_2"
PART FACE 0:1:1:8 "body_3"
PART FACE 0:1:1:9 "body_4"
PART FACE 0:1:1:10 "body_5"
PART FACE 0:1:1:11 "body_6"
ASSEMBLY COMPOUND 0:1:1:12 "Compound"
	INSTANCE FACE 0:1:1:12:1 (refers to 0:1:1:13) "body_7"
	INSTANCE FACE 0:1:1:12:2 (refers to 0:1:1:13) "body_7"
	INSTANCE FACE 0:1:1:12:3 (refers to 0:1:1:14) "body_8"
	INSTANCE FACE 0:1:1:12:4 (refers to 0:1:1:15) "body_9"
	INSTANCE FACE 0:1:1:12:5 (refers to 0:1:1:16) "body_10"
	INSTANCE FACE 0:1:1:12:6 (refers to 0:1:1:17) "body_11"
	INSTANCE FACE 0:1:1:12:7 (refers to 0:1:1:18) "body_12"
	INSTANCE FACE 0:1:1:12:8 (refers to 0:1:1:19) "body_13"
	INSTANCE FACE 0:1:1:12:9 (refers to 0:1:1:19) "body_13"
	INSTANCE COMPOUND 0:1:1:12:10 (refers to 0:1:1:20) "Compound"
	INSTANCE COMPOUND 0:1:1:12:11 (refers to 0:1:1:24) "Compound"
	INSTANCE COMPOUND 0:1:1:12:12 (refers to 0:1:1:29) "Compound"
PART FACE 0:1:1:13 "body_7"
PART FACE 0:1:1:14 "body_8"
PART FACE 0:1:1:15 "body_9"
PART FACE 0:1:1:16 "body_10"
PART FACE 0:1:1:17 "body_11"
PART FACE 0:1:1:18 "body_12"
PART FACE 0:1:1:19 "body_13"
ASSEMBLY COMPOUND 0:1:1:20 "Compound"
	INSTANCE FACE 0:1:1:20:1 (refers to 0:1:1:21) "body_14"
	INSTANCE FACE 0:1:1:20:2 (refers to 0:1:1:21) "body_14"
	INSTANCE COMPOUND 0:1:1:20:3 (refers to 0:1:1:22) "Compound"
	INSTANCE COMPOUND 0:1:1:20:4 (refers to 0:1:1:23) "Compound"
PART FACE 0:1:1:21 "body_14"
PART COMPOUND 0:1:1:22 "Compound"
	FACE 0:1:1:22:1 "body_15"
	FACE 0:1:1:22:2 "body_15"
	FACE 0:1:1:22:3 "body_16"
	FACE 0:1:1:22:4 "body_17"
PART COMPOUND 0:1:1:23 "Compound"
	FACE 0:1:1:23:1 "body_15"
	FACE 0:1:1:23:2 "body_15"
	FACE 0:1:1:23:3 "body_16"
	FACE 0:1:1:23:4 "body_17"
ASSEMBLY COMPOUND 0:1:1:24 "Compound"
	INSTANCE FACE 0:1:1:24:1 (refers to 0:1:1:25) "body_18"
	INSTANCE FACE 0:1:1:24:2 (refers to 0:1:1:26) "body_19"
	INSTANCE COMPOUND 0:1:1:24:3 (refers to 0:1:1:27) "Spring_Link__0_Parts_1"
PART FACE 0:1:1:25 "body_18"
PART FACE 0:1:1:26 "body_19"
ASSEMBLY COMPOUND 0:1:1:27 "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:1 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:2 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:3 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:4 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:5 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:6 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:7 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:8 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:9 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:27:10 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
PART COMPOUND 0:1:1:28 "Spring_Link__0_Parts_1"
	FACE 0:1:1:28:1
	FACE 0:1:1:28:2
	FACE 0:1:1:28:3
ASSEMBLY COMPOUND 0:1:1:29 "Compound"
	INSTANCE FACE 0:1:1:29:1 (refers to 0:1:1:25) "body_18"
	INSTANCE FACE 0:1:1:29:2 (refers to 0:1:1:26) "body_19"
	INSTANCE COMPOUND 0:1:1:29:3 (refers to 0:1:1:30) "Spring_Link__0_Parts_1"
ASSEMBLY COMPOUND 0:1:1:30 "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:1 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:2 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:3 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:4 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:5 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:6 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:7 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:8 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:9 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
	INSTANCE COMPOUND 0:1:1:30:10 (refers to 0:1:1:28) "Spring_Link__0_Parts_1"
PART COMPOUND 0:1:1:31 "Compound"
	FACE 0:1:1:31:1 "body_20"
	FACE 0:1:1:31:2 "body_21"
PART COMPOUND 0:1:1:32 "Compound"
	FACE 0:1:1:32:1 "body_22"
	FACE 0:1:1:32:2 "body_23"
ASSEMBLY COMPOUND 0:1:1:33 "Compound"
	INSTANCE FACE 0:1:1:33:1 (refers to 0:1:1:34) "body_24"
	INSTANCE COMPOUND 0:1:1:33:2 (refers to 0:1:1:35) "Piston_123-844_0_Parts_1"
PART FACE 0:1:1:34 "body_24"
PART COMPOUND 0:1:1:35 "Piston_123-844_0_Parts_1"
	FACE 0:1:1:35:1
	FACE 0:1:1:35:2
ASSEMBLY COMPOUND 0:1:1:36 "Compound"
	INSTANCE FACE 0:1:1:36:1 (refers to 0:1:1:34) "body_24"
	INSTANCE COMPOUND 0:1:1:36:2 (refers to 0:1:1:35) "Piston_123-844_0_Parts_1"

Free Shapes: 1
ASSEMBLY COMPOUND  0:1:1:1 "bug30691_2CylinderEngine.glb"
}
checkXDump D $THE_REF_DUMP
