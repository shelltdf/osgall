<?xml version="1.0" encoding="ISO-8859-1"?>

<!--
################################################################################
# IMG2DCM TEMPLATE FOR OPHTHALMIC PHOTOGRAPHY OBJECTS                          #
# SOP Classes: 1.2.840.10008.5.1.4.1.1.77.1.5.1 (OPb)                          #
# SOP Classes: 1.2.840.10008.5.1.4.1.1.77.1.5.2 (OPw)                          #
################################################################################
# Type 1:  Value MUST be filled in                                             #
# Type 1C: Value MUST be filled in if known, if certain condition (see         #
#          standard) is fulfilled, otherwise LEAVE OUT line                    #
# Type 2:  Value MUST be filled in if known, MUST be left empty otherwise      #
# Type 2C: Same as 2, if a certain condition (see standard) is met. If the     #
#          condition is not met, LEAVE OUT line                                #
# Type 3:  User optional, CAN be written (if it should not, delete line).      #
#          The value written can be chosen freely, but has to conform to       #
#          element's VR (see standard)                                         #
################################################################################
-->

<file-format xmlns="http://dicom.offis.de/dcmtk">
<meta-header xfer="1.2.840.10008.1.2.1" name="Little Endian Explicit"></meta-header>
<data-set xfer="1.2.840.10008.1.2.1" name="Little Endian Explicit">

  <!-- ===================================================================
       The following attribute MUST be present and populated if any
       specific character set is used. In order to prevent conversion
       errors, the encoding of the XML file (specified in the first line)
       and the DICOM encoding (specified here) should refer to the same
       character set, at least for UTF-8 and Latin-1, the character sets
       internally supported by the XML parser.
       =================================================================== -->

  <element tag="00008,0005" vr="CS" vm="1" name="SpecificCharacterSet">ISO_IR 100</element>

  <!-- ===================================================================
       The following attributes are Type 1 and MUST be populated to
       create a valid Ophthalmic Photography Image
       =================================================================== -->

  <element tag="0020,0062" vr="CS" vm="1" name="ImageLaterality">L</element>
  <sequence tag="0022,0015" vr="SQ" name="AcquisitionDeviceTypeCodeSequence">
    <item>
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">409898007</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">SCT</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Fundus Camera</element>
    </item>
  </sequence>

  <!-- ===================================================================
       The following attribute is  required if the acquisition device type
       is Fundus Camera. It may be present otherwise.
       =================================================================== -->

  <element tag="0028,0030" vr="DS" vm="2" name="PixelSpacing">0.02\0.02</element>

  <!-- ===================================================================
       The following attributes are Type 1. The values for these
       attributes are automatically generated by default. You can
       manually override the defaults here.
       =================================================================== -->

  <element tag="0008,0008" vr="CS" vm="4" name="ImageType">ORIGINAL\PRIMARY</element>
  <element tag="0008,0023" vr="DA" vm="1" name="ContentDate">20180417</element>
  <element tag="0008,002a" vr="DT" vm="1" name="AcquisitionDateTime">20210721120000</element>
  <element tag="0008,0033" vr="TM" vm="1" name="ContentTime">111210.48</element>
  <element tag="0018,1063" vr="DS" vm="1" name="FrameTime">0</element>
  <element tag="0018,106a" vr="CS" vm="1" name="SynchronizationTrigger">NO TRIGGER</element>
  <element tag="0018,1800" vr="CS" vm="1" name="AcquisitionTimeSynchronized">N</element>
  <element tag="0020,000d" vr="UI" vm="1" name="StudyInstanceUID">1.2.276.0.75.2.1.11.1.1.180417111300315.260535858133367.1000014</element>
  <element tag="0020,000e" vr="UI" vm="1" name="SeriesInstanceUID">1.2.276.0.75.2.1.11.1.2.180417111335959.260535858133367.1000017</element>
  <element tag="0020,0200" vr="UI" vm="1" name="SynchronizationFrameOfReferenceUID">1.2.276.0.75.2.1.11.1.5.180417103449651.260535858133367.1000001</element>
  <element tag="0028,0009" vr="AT" vm="1" name="FrameIncrementPointer">(0018,1063)</element>
  <element tag="0028,0301" vr="CS" vm="1" name="BurnedInAnnotation">NO</element>

  <!-- ===================================================================
       The following attributes are Type 2 and will by default be added
       with empty value. You can populate them with meaningful values here
       =================================================================== -->

  <element tag="0020,0013" vr="IS" vm="1" name="InstanceNumber">1</element>
  <element tag="0008,0020" vr="DA" vm="1" name="StudyDate">20210721</element>
  <element tag="0008,0030" vr="TM" vm="1" name="StudyTime">120000</element>
  <element tag="0008,0050" vr="SH" vm="0" name="AccessionNumber">987654321</element>
  <element tag="0008,0070" vr="LO" vm="1" name="Manufacturer">Sample Manufacturer</element>
  <element tag="0008,0090" vr="PN" vm="0" name="ReferringPhysicianName">Smith^John</element>
  <element tag="0010,0010" vr="PN" vm="1" name="PatientName">Müller^André</element>
  <element tag="0010,0020" vr="LO" vm="1" name="PatientID">12345678</element>
  <element tag="0010,0030" vr="DA" vm="1" name="PatientBirthDate">19500101</element>
  <element tag="0010,0040" vr="CS" vm="1" name="PatientSex">M</element>
  <element tag="0018,7004" vr="CS" vm="0" name="DetectorType">CCD</element>
  <element tag="0020,0010" vr="SH" vm="1" name="StudyID">54321</element>
  <element tag="0020,0011" vr="IS" vm="1" name="SeriesNumber">12345</element>
  <element tag="0020,0020" vr="CS" vm="2" name="PatientOrientation">L\F</element>
  <element tag="0022,0005" vr="CS" vm="0" name="PatientEyeMovementCommanded">NO</element>
  <element tag="0022,000A" vr="FL" vm="0" name="EmmetropicMagnification">0.0</element>
  <element tag="0022,000B" vr="FL" vm="0" name="IntraOcularPressure">50.0</element>
  <element tag="0022,000C" vr="FL" vm="0" name="HorizontalFieldOfView">90.0</element>
  <element tag="0022,000D" vr="CS" vm="0" name="PupilDilated">NO</element>
  <sequence tag="0022,0016" vr="SQ" name="IlluminationTypeCodeSequence">
    <item> <!-- values to be taken from CID 4203 "Ophthalmic Photography Illumination" -->
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">111630</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">DCM</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Dynamic light</element>
    </item>
  </sequence>
  <sequence tag="0022,0017" vr="SQ" name="LightPathFilterTypeStackCodeSequence">
    <item> <!-- values to be taken from CID 4204 "Ophthalmic Filter" -->
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">445391002</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">SCT</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Polarizing optical filter</element>
    </item>
  </sequence>
  <sequence tag="0022,0018" vr="SQ" name="ImagePathFilterTypeStackCodeSequence">
    <item> <!-- values to be taken from CID 4204 "Ophthalmic Filter" -->
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">111609</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">DCM</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">No filter</element>
    </item>
  </sequence>
  <sequence tag="0022,0019" vr="SQ" name="LensesCodeSequence">
    <item> <!-- values to be taken from CID 4205 "Ophthalmic Lens" -->
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">410686000</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">SCT</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Contact fundus lens</element>
    </item>
  </sequence>
  <sequence tag="0022,001B" vr="SQ" name="RefractiveStateSequence">
    <item>
      <element tag="0022,0007" vr="FL" vm="1" name="SphericalLensPower">1.0</element>
      <element tag="0022,0008" vr="FL" vm="1" name="CylinderLensPower">1.0</element>
      <element tag="0022,0009" vr="FL" vm="1" name="CylinderAxis">2.5</element>
    </item>
  </sequence>

  <!-- ===================================================================
       The following Type 1C sequence is required if the image was generated with contrast
       =================================================================== -->

  <sequence tag="0018,0012" vr="SQ" name="ContrastBolusAgentSequence">
    <item> <!-- values to be taken from CID 4200 "Ophthalmic Imaging Agent" -->
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">350086004</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">SCT</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Fluorescein</element>
      <element tag="0018,9337" vr="US" vm="1" name="ContrastBolusAgentNumber">1</element>
      <sequence tag="0018,0014" vr="SQ" name="ContrastBolusAdministrationRouteSequence">
        <item> <!-- values to be taken from CID 11 "Administration Route" -->
          <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">47625008</element>
          <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">SCT</element>
          <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Intravenous route</element>
        </item>
      </sequence>
      <sequence tag="0018,9338" vr="SQ" name="ContrastBolusIngredientCodeSequence">
      </sequence>
      <element tag="0018,1041" vr="DS" vm="1" name="ContrastBolusVolume"></element>
      <element tag="0018,1049" vr="DS" vm="1" name="ContrastBolusIngredientConcentration"></element>
    </item>
  </sequence>

  <!-- ===================================================================
       The following Type 1C sequence is required if the value of
       PatientEyeMovementCommanded is YES.
       =================================================================== -->

  <sequence tag="0022,0006" vr="SQ" name="PatientEyeMovementCommandCodeSequence">
    <item> <!-- values to be taken from CID 4201 "Patient Eye Movement Command" -->
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">408744005</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">SCT</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Primary gaze</element>
    </item>
  </sequence>

  <!-- ===================================================================
       The following Type 2C attributes are required if the value of
       (0022,1622) OphthalmicVolumetricPropertiesFlag is YES. The conditions
       actually are a bit more complex, see DICOM Part 3, Table C.8.17.5-1
       "Ocular Region Imaged Module Attributes".
       =================================================================== -->

  <sequence tag="0022,001D" vr="SQ" name="RelativeImagePositionCodeSequence">
    <item> <!-- values to be taken from CID 4207 "Ophthalmic Image Position" -->
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">111900</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">DCM</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Macula centered</element>
    </item>
  </sequence>
  <element tag="0022,1624" vr="FL" vm="1" name="OphthalmicAnatomicReferencePointXCoordinate">100</element>
  <element tag="0022,1626" vr="FL" vm="1" name="OphthalmicAnatomicReferencePointYCoordinate">100</element>


  <!-- ===================================================================
       The following Type 1C attribute is required if the image was generated
       by a camera producing a two-color image.
       =================================================================== -->

  <element tag="0028,0003" vr="US" vm="1" name="SamplesPerPixelUsed">2</element>

  <!-- ===================================================================
       The following Type 1C sequence is required if the colors produced by the camera
       are different from the natural interpretation of PhotometricInterpretation.
       The number of items in this sequence must match the value of
       SamplesPerPixelUsed (if present) or SamplesPerPixel (otherwise).
       =================================================================== -->

  <sequence tag="0022,001A" vr="SQ" name="ChannelDescriptionCodeSequence">
    <item> <!-- values to be taken from CID 4206 "Ophthalmic Channel Description" -->
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">414497003</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">SCT</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Infrared</element>
    </item>
    <item> <!-- values to be taken from CID 4206 "Ophthalmic Channel Description" -->
      <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">415770004</element>
      <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">SCT</element>
      <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Ultraviolet</element>
    </item>
  </sequence>

  <!-- ===================================================================
       The following attributes are required if the value of PupilDilated is YES.
       They are Type 2C, however, i.e. may remain empty if the value is not known.
       =================================================================== -->

  <sequence tag="0022,0058" vr="SQ" name="MydriaticAgentSequence">
    <item>
      <sequence tag="0022,001A" vr="SQ" name="MydriaticAgentCodeSequence">
        <item> <!-- values to be taken from CID 4208 "Mydriatic Agent" -->
          <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">771928002</element>
          <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">SCT</element>
          <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Atropine</element>
        </item>
      </sequence>
      <element tag="0022,004E" vr="DS" vm="1" name="MydriaticAgentConcentration">0.01</element>
      <sequence tag="0022,0042" vr="SQ" name="MydriaticAgentConcentrationUnitsSequence">
        <item> <!-- values to be taken from CID 82 "Measurement Unit", i.e. UCUM -->
          <element tag="0008,0100" vr="SH" vm="1" name="CodeValue">%</element>
          <element tag="0008,0102" vr="SH" vm="1" name="CodingSchemeDesignator">UCUM</element>
          <element tag="0008,0104" vr="LO" vm="1" name="CodeMeaning">Percent</element>
        </item>
      </sequence>
    </item>
  </sequence>
  <element tag="0022,000E" vr="FL" vm="1" name="DegreeOfDilation">2.0</element>

</data-set>
</file-format>
